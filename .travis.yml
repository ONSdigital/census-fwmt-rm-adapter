language: java
jdk: oraclejdk8
services:
- docker
before_install:
- docker run  -d --name rabbit -p 5672:5672 rabbitmq:3.6
install: true
script:
- "if [[ $TRAVIS_COMMIT_MESSAGE != 'JENKINS SNAPSHOT UPDATE' ]];
  then ./gradlew build --info;
  fi"
env:
  global:
  - SPRING_PROFILES_ACTIVE=default,integration-tests
  - secure: M/GzkbPvMx7jDm1oTX7ijDucSWhKslEtIGPHjhdP3FWpD5kmjIqGQUgseUeBsxvDwpG1TR/+lMQbGEToSRe6S0RHWHRbpDCok41qGli4xEbeMqmVqZbkahnbIhRtLMOeIS1oLGbl23X4cJ5tSLyUMw2JgY8iy7+/tbYIG/WhMZ+yYXpg13HNitOc19ziwrQhHLN5hYFsXOGnVB42cYp++8gdfBVijUJtmsZJX/V+MmxjPjYIzT1Cqqd/RCPJyL/fMLkRLEgWmPn3Pr/mraOk3gbKZrhGlfMJ1k8BPum3tSghVPUGWFWa937867r6JuuuEiCBwJkkunfwynU2ZVWvz9kLK5zSVqZdK3VGTKbijkCmI/zbYNihv2mdgWAAIx5JOeTcKmN/DO9FCEHPsecOzjmOC3z/wRgmSvgYsGRoZlXvmKSJ3y9zMd3fd1Gu1L4YEA3jEj7uKjggATDH0KBTRZc2Q7o/CZUv7fk/FESdug8EQT7PDWRI2Pn/4UEOIoDNdb4il7WQm8XcxjSksObOYqraUeac31jjtpYgEuT9DXRKn4/qkQXU3C9rlODYafPEcKW6T6Y23YPlDolzIgRX3TZwXQlOjy4+DZLGlH2i0yOKYh+gCX02g+2c3sEx+QGN0LD7iJH7IFsoOCYLBDoKI2lmU0p/tr6jVR/jU2Fh/oc=
  - secure: dTGM5T6yb2F70XXIFpgl0mK2Qv51EDycJQj+r++MBWo96Q0WFEmfja3KYm13rlBonlAiuiuzNxmQHk92OGfnH94AC/BmN94EzcfHE2GVpAjyLgsexwQmZWY+Lfnl6LmW7xOaNEhpvhH5ld6TUROzRJUNIJ1YQg5zbOiVBCitrQb1UtytOWaHHrURX56/Av52Xc4GGVjoS3F+QebUidvlm2dJuCIO6ItVDG5widRfPzPVSGPs11JdjCVlPc70qx7BxvoYR149tNMIH21je5vF09SVgukLP3fAGwrFLMYsRW65d0owhFpKTWKGouWyuhfaGmm8WfHY/LE5ew6SIXIZYlEgXQfSIJ9hapgeqrf8CAGIhLIwH/IOieehMo0RDwSOA82QMsxTiY3mweUyzBqKKCJX21+2nj0q6O6+AOJ7UcXwkZpBwXvcR4KwIe+IMlOakcY6dtp/KWBuf1HrrGg7pEDA5cJKyAzMgmbgll1tvZ1RIPVTCBUBm1De/2kW3YRTKR2RkrKRN5AeIJJf1KtK946xs6WnrvcwpNnUh2lg75voza2aBhkfiA+va44aFhWXO5+sJk5IhB9fee49+EhnzdX+EwzvkT4sYWXzdXQTGFEUNNw1sNvecFBlghbwTWfkm27R9bvibvrdGcF7iHudBMiBCiuuQRSc3pZuT5LmY+I=
  - secure: h+thT2xqkNVzS1ZrP+gpYez63TLrkaPrF4NB9ekUsxZoJMRrYkHdTE1yId488ozIN7Nn0RYVYm+mv8QFnXaJI1c6EhOyemHYdsmynt6uFNc0EVTe81ZKLiyaCCBUwLagaiVBjTO/uIN0K8TEY2srktt1ibQBoKsuS366ikloDVkwpdD3+m9VBPQkZR/wG2IHKSQdmA9mjGh2FRpN1iYWJxAtgPHetTdWfGgIMUo7Ev8TOPdfrpSi2BCMg3uAVSuP0r/x6Ec1gFDfv3TyrXFt+cH5OvKZ9KQXV0K659KMszepn/TTI7My4I6xDwAvfuMH+RbXj662RCnVj3vNOX+NsasZvpKkQk6oCNkC5cKTXzOrqlcEv+KYtnuDzgitfq2IJzhXiNsA0itgpUUYKebE050BvFfgXrI0IzN2S7ZJysLzldEQNOZJ8UuGkVUDN1UWVSqBhq9E1ZfPVy3yen5ZjR+rjUIrLevU+xjBZrVftUd4UzAazGCWL9vMow5VkpA4jBIrLBxAe77bCEFbue4kOElOJVf8uJtNycjfvPPslCt2M1tpuGC1lqtlNytjjuB7q88bWa1u3l7WQBjy4rJCpKr5uDGv1ZYAxEMYl0xdja851l2Y1UCv9RG8qAA9/xkBau0DsLN9j5iua7DMYgf/HT9SlX1yHIyC5SOQs54xz4c=
  - secure: Ogbmu/RQRv73UAyp3DOwH8Xyg3d85jUqVkXQkwFq1rk6kyoHQkdb0oE7efMBj+1aAVR/NVIsk+gh5ZjKnkjkV0+CrjSQGy/ZSKrPJ/o4/UXytNUlVSRfgjQYxEPm/mXqm1xLUVrCB58ib/jtbhyt3tps/Zd4hUWtXgA28tXQyTam0y4O2fek/tOH6ngeJR7D7Mb2UJEfCgTzSXr7G1BHfmBhX8WGX80Qh4R97sXoqPwSBgEehDBVYf5gv6JXvTMPaKo86qFFVkTqmPxQDdB9vZUuiZXB5MhmlQfzWmm4vPFiPTrXic9K5jSybBsD7zHmzm0NPy77xcKMT1sJJrTz3UxCM1+xeB70bvgzE0dGqUM6CQwIfYO7OJJE2VDSswjJBzjEi/jhT3/s0d5tKs4zQy29iJSFPGfubxpfCON5hmq1QblRx1camt0yHpt5a/Octhg17z0lsk2mUEZgvF+n29EHFHZ/Ps1Fv/EO79oc07416Fvl3XXCHfzpN5g88qZDBvWZN+h8SYgtMEVvbv5dgX2GLz6czeD8khgFcpw2W6wFIgndvSmGKf7dAlG93n/68zanoIOQFMUAkM25TLiISWkDTtvLMoK0tluDAagvRXZ5xt1wBPwr5rQDPLOBKzlsj6frPT6XZUf2+bj4yFW+gsaBBw2Hql3wRR6d7yHSho8=
  - secure: i/1N1QSjFsrt8bP5g2ZuRvc6AGOwDiVsIyX+vO5wnyxTFkVcSzwbbmrLWCOJH3ahjiapc1CZZLLkIkhawCf1bIsX6tUzaJs5NjHy+LPxvRSdGysD6GTA5iv2dnaEO3l3fJtT8fC2k2G19Of8hh9XO52RzOVZPZPKfV8/wUkweo8We638Jh4m6gMwTZU/hTvnMZjcXl2zuOu2bdj+cfe3CKlfB6OM/nmRb5Or+6+w+L0AiaWhr8Ylnksadkqrj/ph+JtYm41S+9CNCKZ2pRhmYHjEund2klVU/iFLaCujEoM07uN2xz8e89wKO/nlk/yflwgOXxwQoIvIMO9AxOBgbIW8b3pdIJvUbIfKi48eUiEKu6OYQdGz09sUTsah5lF407wA09PQEXdyysul45pCM7Sa+Iarszp4aUUgNiZI49zECxNgV4QA05COmMF7tlpcZ9cnmD+z+HDRqj0Ae9AWX3BOQNa4LoYWq3q7sUcMFL3sooE60gWUT9RuWbqTRKl9hbpbAl7TRPaSO/G4HBANXRbf/haV9oPaO4XtbdisXpw6ROQNa9gzE44/oBsj7yG/gtoFd0pJ06iyOUer7pSM1vfj6Huu8wWNUjodA3mSUh71HgDsX9oz3aonhX/2VO6A1hIxoh5qr0RCIFqauhjy8wntXhm0X6u67Wcn2xcyFeQ=
branches:
  only:
  - master
notifications:
  slack:
    secure: B24srxRxVVx2NcqATpy82YYzL794ZTn4/xn8DprYEtLJlksYNK2aedoK2Xn5OkaFA9yEmxWkvE59jZnhMR6qeFKC7pihTvg1DlJyG9lkhUcWM3BjggUC1R1uDmrRx3l1jyihlpBeNGS6Q8bdUP9JZnVxY0IizK2x+jVBNgfIdpSVz5crgp5uvuwdoxTcpEqDDI+TQliNTjYTZCTOPR06WoBiimg1cXMVAE7kehfphQiOaxfAg5NVv7esuP9xckOOp8zY3Le+Z7NUy64VgogTetQVezxmFKaVtuY1wqnKqauLlohISeLyEhPDefjCXiT6o2V2c82Rahl6g/1D/NqrxurfqQmTTm8hVBVwSDc6frjvZR86IbNa8qGDL4VR8bZuQQtClsraj4Tw121cymEKlJD0MNXUgP77zttYt5RNEiqTP0sBsK579FhH84e7EK3MkWmhb2oQt8+jTqja9PPMZiGkE//ZYN/JxCGfoTOSdnewk3AcCKtf9azHHkkg6Iukew3HNvl+keBUiGBqgDAcYF/Zgrf18yiW1VsA+1tQSoJGpAze886Ld4d4efiiQhTohpwbnd5yK/Zk+d9k5zARbYTwWZyYSnkCmtFox73e1wT/Y9i2+2nBZuGK7dMEgkvf5Z6p7mb2215WiUke30GeT4bqpNPcurjF0AbWjmtbZMc=
after_success:
- bash <(curl -s https://codecov.io/bash)
- if [[ "$TRAVIS_BRANCH" = "master" ]] && [[ "$TRAVIS_PULL_REQUEST" = "false" ]] && [[ $TRAVIS_COMMIT_MESSAGE != "JENKINS SNAPSHOT UPDATE" ]];
  then echo "$DOCKER_PASSWORD" | docker login --username "$DOCKER_USERNAME" --password-stdin;
  docker build -t fwmtrmadapter --build-arg jar=build/libs/fwmt-rm-adapter-*.jar .;
  docker tag fwmtrmadapter sdcplatform/fwmtrmadapter:rm-adapter-$TRAVIS_BUILD_NUMBER;
  docker push sdcplatform/fwmtrmadapter;
  ./gradlew artifactPublish;
  fi
